server:
  http_listen_port: 9080
  grpc_listen_port: 0

positions:
  filename: /tmp/positions.yaml

clients:
  - url: http://loki:3100/loki/api/v1/push

scrape_configs:
  # A) systemd-journal (ถ้าเครื่องคุณใช้ journald และมี /var/log/journal)
  - job_name: systemd-journal
    journal:
      max_age: 24h
      path: /var/log/journal
      labels:
        job: journal
    relabel_configs:
      - source_labels: ['__journal__hostname']
        target_label: host
      - source_labels: ['__journal__systemd_unit']
        target_label: unit

  # B) Podman container logs (rootful)
  - job_name: podman-logs
    static_configs:
      - targets: ['localhost']
        labels:
          job: podman
          __path__: /var/lib/containers/storage/overlay-containers/*/userdata/ctr.log

  # B-alt) Podman container logs (rootless) — เปิดใช้ถ้าคุณรันแบบ rootless
  # - job_name: podman-logs-rootless
  #   static_configs:
  #     - targets: ['localhost']
  #       labels:
  #         job: podman
  #         __path__: /home/d4c/.local/share/containers/storage/overlay-containers/*/userdata/ctr.log
